title: 关于centos6.5 lamp搭建好后外网无法访问的一些经验总结
categories: Linux##分类
tags: [Linux,Centos]##标签，多标签格式为 [tag1,tag2,...]
keywords: Linux,Centos##文章关键词，多关键词格式为 keyword1,keywords2,...
description: 外网不能访问aoache，查看了apache的access_log，发现根本没有访问到服务器，直接就被拒绝了，所以在想可能是防火墙把80端口关了，百度了之后发现了原因所在。因为防火墙把80端口给禁了，所以把80端口开放出来就可以让外网访问到apache服务器
date: 2015/11/16 19:24:25 
---
外网不能访问aoache，查看了apache的access_log，发现根本没有访问到服务器，直接就被拒绝了，所以在想可能是防火墙把80端口关了，百度了之后发现了原因所在。

因为防火墙把80端口给禁了，所以把80端口开放出来就可以让外网访问到apache服务器

CentOS防火墙设置开启80端口访问

我们以添加80端口为例操作如下：
``` bash
[root@centos httpd]# /sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT
``` 
保存

<!--more-->

``` bash
[root@centos httpd]# /etc/rc.d/init.d/iptables save
iptables：将防火墙规则保存到 /etc/sysconfig/iptables：     [确定]
``` 
如果上面的步骤还没好的话，可能是这个iptables文件使用的是包含调用。

一般的在/etc/sysconfig/iptables这个路径上

或者使用vi打开这个文件修改手动添加。
``` bash
[root@centos httpd]# vi /etc/sysconfig/iptables

# Generated by iptables-save v1.4.7 on Tue Feb 14 07:32:18 2012
*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [7:640]
-A INPUT -p tcp -m tcp --dport 10000 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -j REJECT --reject-with icmp-host-prohibited
COMMIT
# Completed on Tue Feb 14 07:32:18 2012
``` 
重新启动服务
``` bash
[root@centos httpd]# service iptables restart
iptables：清除防火墙规则：                                 [确定]
iptables：将链设置为政策 ACCEPT：filter                    [确定]
iptables：正在卸载模块：                                   [确定]
iptables：应用防火墙规则：                                 [确定]
``` 
查看端口是否生效:
``` bash
[root@centos httpd]# /etc/init.d/iptables status
``` 
表格：filter
``` bash
Chain INPUT (policy ACCEPT)
num  target     prot opt source               destination
1    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           tcp dpt:10000
2    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           tcp dpt:80
3    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,
4    ACCEPT     icmp --  0.0.0.0/0            0.0.0.0/0
5    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0
6    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp
7    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with ic

Chain FORWARD (policy ACCEPT)
num  target     prot opt source               destination
1    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with ic

Chain OUTPUT (policy ACCEPT)
num  target     prot opt source               destination
``` 